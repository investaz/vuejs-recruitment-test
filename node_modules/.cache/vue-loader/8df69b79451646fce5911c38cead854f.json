{"remainingRequest":"C:\\Users\\q.samaya\\Desktop\\vuejs-recruitment-test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\q.samaya\\Desktop\\vuejs-recruitment-test\\src\\popups\\MoreDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\q.samaya\\Desktop\\vuejs-recruitment-test\\src\\popups\\MoreDetails.vue","mtime":1635503756914},{"path":"C:\\Users\\q.samaya\\Desktop\\vuejs-recruitment-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\vuejs-recruitment-test\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\vuejs-recruitment-test\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\q.samaya\\Desktop\\vuejs-recruitment-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\vuejs-recruitment-test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOyAgCiAgaW1wb3J0IEFkZE9yZGVyIGZyb20gJy4uL3BvcHVwcy9BZGRPcmRlcicKICBleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6WyJvcmRlcklkIl0sCiAgY29tcG9uZW50czp7IEFkZE9yZGVyICB9LAogICBkYXRhICgpIHsKICAgICByZXR1cm4geyAKICAgICBkaWFsb2c6ZmFsc2UsCiAgICAgc2VsZWN0ZWRSb3c6IG51bGwsIAogICAgIHN1bVByaWNlOm51bGwsCiAgICAgc3RhdHVzOicnLAogICAgIG9yZGVyRGV0YWlsOltdLAoKICAgICBoZWFkZXJzOlsKICAgICAgIHsgdGV4dDogJ+KElicsICAgdmFsdWU6ICdpbmRleCcsc29ydGFibGU6ZmFsc2UgfSwKICAgICAgIHsgdGV4dDogJ03JmWhzdWx1biBhZMSxJywgICB2YWx1ZTogJ21lYWxOYW1lJyAgfSwKICAgICAgIHsgdGV4dDogJ01pcWRhcicsIHZhbHVlOiAnYW1vdW50JyAgIH0sICAKICAgICAgIHsgdGV4dDogJ03JmWJsyZnEnycsIHZhbHVlOiAncHJpY2UnICAgfSwgIAogICAgICAgeyB0ZXh0OiAnU2lmYXJpxZ8gc2FhdMSxJywgdmFsdWU6ICdvcmRlclRpbWUnICAgfSwgIAogICAgICAgeyB0ZXh0OiAnIycsICB2YWx1ZTogJ3N0YXR1cycgLHNvcnRhYmxlOmZhbHNlICB9LAogICAgICAgeyB0ZXh0OiAnR2VyaScsICB2YWx1ZTogJ3Rha2ViYWNrJyAsc29ydGFibGU6ZmFsc2UgIH0KICAgICBdCiAgICAgfQogICB9LAogICAgY29tcHV0ZWQ6eyAuLi5tYXBHZXR0ZXJzKFsiYWxsb3JkZXJzIl0pLCB9LAogICAgbWV0aG9kczogeyAgLi4ubWFwQWN0aW9ucyhbImZldGNoT3JkZXJzIiwgInJlZnVzZU9yZGVyIiwiZW5kT3JkZXIiLCJhcHBseU9yZGVyIl0pLCAgIAogICAgICAgICAgICAgICAgdXBkYXRlUHJpY2U6ZnVuY3Rpb24oKXsgICB0aGlzLiRlbWl0KCd1cGRhdGVQcmljZScsdGhpcy5zdW1QcmljZSk7ICB9LAoKICAgICAgICAgICAgICAgICByZWZPcmRlcihpZCl7CiAgICAgICAgICAgICAgICAgICB0aGlzLm9yZGVyRGV0YWlsLmZpbHRlcihvcklkPT57cmV0dXJuIG9ySWQuaWQgPT09IGlkfSlbMF0uc3RhdHVzPSJpbXRpbmEiOwogICAgICAgICAgICAgICAgICAgdGhpcy5zdW1QcmljZT10aGlzLm9yZGVyRGV0YWlsLmZpbHRlcihpdGVtPT57cmV0dXJuIGl0ZW0uc3RhdHVzICE9ICdpbXRpbmEnfSkubWFwKGl0ZW0gPT5wYXJzZUZsb2F0KGl0ZW0ucHJpY2UpKS5yZWR1Y2UoKHByZXYsIG5leHQpID0+IHByZXYgKyBuZXh0KTsgICB9LAogICAgIAogICAgICAgICAgICAgICAgZW5kT3JkZXJTdWJtaXQoKSB7CiAgICAgICAgICAgICAgICAgICBsZXQgdG9kYXk9bmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kT3JkZXIoe29yZGVyOnsKICAgICAgICAgICAgICAgICAgIHByaWNlOnRoaXMuc3VtUHJpY2UsCiAgICAgICAgICAgICAgICAgICBlbmREYXRlOiB0b2RheS5nZXREYXRlKCkrJy0nKyh0b2RheS5nZXRNb250aCgpKzEpKyctJyt0b2RheS5nZXRGdWxsWWVhcigpLAogICAgICAgICAgICAgICAgICAgZW5kVGltZTogdG9kYXkuZ2V0SG91cnMoKSArICI6IiArIHRvZGF5LmdldE1pbnV0ZXMoKX0sICAgaWQ6dGhpcy5vcmRlcklkfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICBhcHBseVN1Ym1pdCgpIHsgdGhpcy5hcHBseU9yZGVyKHtvcmRlcjp7IHByaWNlOnRoaXMuc3VtUHJpY2V9LCAgIGlkOnRoaXMub3JkZXJJZH0pIH0sCiAgICAgICAgICAgICBzdW0oKXsgIHRoaXMuc3VtUHJpY2U9dGhpcy5vcmRlckRldGFpbC5maWx0ZXIoaXRlbT0+e3JldHVybiBpdGVtLnN0YXR1cyAhPSAnaW10aW5hJ30pLm1hcChpdGVtID0+cGFyc2VGbG9hdChpdGVtLnByaWNlKSkucmVkdWNlKChwcmV2LCBuZXh0KSA9PiBwcmV2ICsgbmV4dCk7IH0sCiAgICAgICAgICAgICByZWZ1c2UoKXsKICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hPcmRlcnMoKQogICAgICAgICAgICAgIC50aGVuKCgpPT57CiAgICAgICAgICAgICAgICBpZih0aGlzLmFsbG9yZGVycy5maWx0ZXIob3JJZD0+e3JldHVybiBvcklkLmlkID09PSB0aGlzLm9yZGVySWR9KVswXS5vcmRlcnMpewogICAgICAgICAgICAgICB0aGlzLm9yZGVyRGV0YWlsPXRoaXMuYWxsb3JkZXJzLmZpbHRlcihvcklkPT57cmV0dXJuIG9ySWQuaWQgPT09IHRoaXMub3JkZXJJZH0pWzBdLm9yZGVyczsKICAgICAgICAgICAgICAgICB0aGlzLnN1bVByaWNlPXRoaXMub3JkZXJEZXRhaWwuZmlsdGVyKGl0ZW09PntyZXR1cm4gaXRlbS5zdGF0dXMgIT0gJ2ltdGluYSd9KS5tYXAoaXRlbSA9PnBhcnNlRmxvYXQoaXRlbS5wcmljZSkpLnJlZHVjZSgocHJldiwgbmV4dCkgPT4gcHJldiArIG5leHQpOwogIAogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCAKICAgIApjcmVhdGVkKCl7CgogLy8gdGhpcy5mZXRjaE9yZGVycygpCiAvLyAudGhlbigoKT0+ewogICAgaWYodGhpcy5hbGxvcmRlcnMuZmlsdGVyKG9ySWQ9PntyZXR1cm4gb3JJZC5pZCA9PT0gdGhpcy5vcmRlcklkfSlbMF0ub3JkZXJzKXsKICAgIHRoaXMub3JkZXJEZXRhaWw9dGhpcy5hbGxvcmRlcnMuZmlsdGVyKG9ySWQ9PntyZXR1cm4gb3JJZC5pZCA9PT0gdGhpcy5vcmRlcklkfSlbMF0ub3JkZXJzOwogICAgfQogICAgIC8vICB9KQogLy8gLnRoZW4oKCk9PnsKICAgIGlmKHRoaXMub3JkZXJEZXRhaWwubGVuZ3RoICE9IDApewogICAgdGhpcy5zdW1QcmljZT10aGlzLm9yZGVyRGV0YWlsLmZpbHRlcihpdGVtPT57cmV0dXJuIGl0ZW0uc3RhdHVzICE9ICdpbXRpbmEnfSkubWFwKGl0ZW0gPT5wYXJzZUZsb2F0KGl0ZW0ucHJpY2UpKS5yZWR1Y2UoKHByZXYsIG5leHQpID0+IHByZXYgKyBuZXh0KTsKICAgIH0KICAgLy8gIH0pCiAgCn0KIH0K"},{"version":3,"sources":["MoreDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"MoreDetails.vue","sourceRoot":"src/popups","sourcesContent":["<template>\r\n  <div>\r\n    <v-dialog\r\n       v-model=\"dialog\"\r\n       width=\"950\"\r\n       @click:outside=\"dialog = true\"\r\n    >\r\n      <template v-slot:activator=\"{ on }\"> \r\n        <v-btn @click=\"status=allorders.filter(orId=>{return orId.id === orderId})[0].status\" v-on=\"on\">BAX </v-btn>\r\n      </template> \r\n      <v-card>\r\n        <v-card-title  class=\"modal-header\">\r\n          <span>Sifarişlər</span>\r\n          <v-spacer></v-spacer> \r\n           <v-btn\r\n            icon\r\n            color=\"primary\"\r\n            text\r\n            @click=\"dialog = false\"\r\n          ><v-icon>cancel</v-icon> \r\n          </v-btn> \r\n        </v-card-title>\r\n         \r\n        <v-card-text>\r\n             <v-row>\r\n                 <v-col   cols=\"12\"   md=\"12\" >  \r\n                 <v-data-table \r\n                 :headers=\"headers\"\r\n                 :items=\"orderDetail\"   \r\n                 item-key=\"id\" \r\n                 :footer-props=\"{\r\n                 itemsPerPageText:'Məlumat sayı:',\r\n                 itemsPerPageOptions: [10,50,100, 1000], \r\n          \r\n      }\">\r\n     \r\n        <template v-slot:body=\"{ items }\"> \r\n           <tbody class=\"moreDetails\">\r\n            <tr v-for=\"(item, key) in items\" :key=\"item.id\">\r\n            <td :class=\"item.closed === true ? 'closed' : ''\">{{key+1}}</td>\r\n            <td>{{item.mealName}}</td>\r\n            <td>{{ item.amount }}</td> \r\n            <td>{{ item.price + ' AZN' }}</td>\r\n            <td>{{ item.orderTime }}</td> \r\n            <td><span :class=\"item.status === 'imtina' ? 'refuse' : ''\" >{{ item.status }}</span></td>\r\n            <td ><button  :disabled=\"status=='Sonlanıb'\" @click=\"refOrder(item.id)\" v-if=\"item.status!='imtina'\" class=\"takeback\">Geri al</button></td>\r\n          </tr>\r\n          <tr v-if=\"orderDetail.length!=0\" class=\"sum\">\r\n             <td colspan=\"3\">Cəmi məbləğ:</td>\r\n             <td colspan=\"4\">{{sumPrice + ' AZN'}} </td>  \r\n         </tr>\r\n         <tr v-if=\"orderDetail.length==0\" class=\"norecord\">\r\n             <td colspan=\"8\"><div class=\"norecord-c\">'Sifariş əlavə et' düyməsini basaraq sifarişləri daxil edin!</div></td>\r\n        </tr>\r\n      </tbody>\r\n    </template>\r\n  </v-data-table>  \r\n              </v-col>\r\n             </v-row>\r\n        </v-card-text> \r\n        <v-divider></v-divider> \r\n        <v-card-actions class='dialog-buttons'>\r\n           <div class=\"align-left all-bt\">\r\n            <AddOrder v-on:sum='sum' v-bind:orderId = 'orderId' v-if=\"status=='Sonlanmayıb'\" />\r\n            <v-btn  v-if=\"status=='Sonlanmayıb'\" @click=\" endOrderSubmit(); $emit('sumTotal'); dialog = false\"  class=\"btn-action\" outlined>Sonlandır</v-btn> \r\n           </div>\r\n          <div  class=\"align-right all-bt\">\r\n           <v-btn   v-if=\"status=='Sonlanmayıb'\"  @click=\"applySubmit(); $emit('sumTotal');dialog = false\"  class=\"btn-cancel\" outlined>Təsdiq et</v-btn> \r\n           <v-btn  @click=\"refuse();dialog = false;\"  class=\"btn-cancel\" outlined>BAĞLA</v-btn> \r\n           </div>\r\n        </v-card-actions> \r\n      </v-card>\r\n    </v-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n   import { mapGetters, mapActions } from \"vuex\";  \r\n   import AddOrder from '../popups/AddOrder'\r\n   export default {\r\n   props:[\"orderId\"],\r\n   components:{ AddOrder  },\r\n    data () {\r\n      return { \r\n      dialog:false,\r\n      selectedRow: null, \r\n      sumPrice:null,\r\n      status:'',\r\n      orderDetail:[],\r\n\r\n      headers:[\r\n        { text: '№',   value: 'index',sortable:false },\r\n        { text: 'Məhsulun adı',   value: 'mealName'  },\r\n        { text: 'Miqdar', value: 'amount'   },  \r\n        { text: 'Məbləğ', value: 'price'   },  \r\n        { text: 'Sifariş saatı', value: 'orderTime'   },  \r\n        { text: '#',  value: 'status' ,sortable:false  },\r\n        { text: 'Geri',  value: 'takeback' ,sortable:false  }\r\n      ]\r\n      }\r\n    },\r\n     computed:{ ...mapGetters([\"allorders\"]), },\r\n     methods: {  ...mapActions([\"fetchOrders\", \"refuseOrder\",\"endOrder\",\"applyOrder\"]),   \r\n                 updatePrice:function(){   this.$emit('updatePrice',this.sumPrice);  },\r\n\r\n                  refOrder(id){\r\n                    this.orderDetail.filter(orId=>{return orId.id === id})[0].status=\"imtina\";\r\n                    this.sumPrice=this.orderDetail.filter(item=>{return item.status != 'imtina'}).map(item =>parseFloat(item.price)).reduce((prev, next) => prev + next);   },\r\n      \r\n                 endOrderSubmit() {\r\n                    let today=new Date();\r\n                    this.endOrder({order:{\r\n                    price:this.sumPrice,\r\n                    endDate: today.getDate()+'-'+(today.getMonth()+1)+'-'+today.getFullYear(),\r\n                    endTime: today.getHours() + \":\" + today.getMinutes()},   id:this.orderId})\r\n                                   },\r\n              applySubmit() { this.applyOrder({order:{ price:this.sumPrice},   id:this.orderId}) },\r\n              sum(){  this.sumPrice=this.orderDetail.filter(item=>{return item.status != 'imtina'}).map(item =>parseFloat(item.price)).reduce((prev, next) => prev + next); },\r\n              refuse(){\r\n                 this.fetchOrders()\r\n               .then(()=>{\r\n                 if(this.allorders.filter(orId=>{return orId.id === this.orderId})[0].orders){\r\n                this.orderDetail=this.allorders.filter(orId=>{return orId.id === this.orderId})[0].orders;\r\n                  this.sumPrice=this.orderDetail.filter(item=>{return item.status != 'imtina'}).map(item =>parseFloat(item.price)).reduce((prev, next) => prev + next);\r\n   \r\n                  }\r\n                   })\r\n              }\r\n               }, \r\n     \r\n created(){\r\n \r\n  // this.fetchOrders()\r\n  // .then(()=>{\r\n     if(this.allorders.filter(orId=>{return orId.id === this.orderId})[0].orders){\r\n     this.orderDetail=this.allorders.filter(orId=>{return orId.id === this.orderId})[0].orders;\r\n     }\r\n      //  })\r\n  // .then(()=>{\r\n     if(this.orderDetail.length != 0){\r\n     this.sumPrice=this.orderDetail.filter(item=>{return item.status != 'imtina'}).map(item =>parseFloat(item.price)).reduce((prev, next) => prev + next);\r\n     }\r\n    //  })\r\n   \r\n }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}