{"remainingRequest":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\q.samaya\\Desktop\\MIS\\src\\popups\\NewOrg.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\src\\popups\\NewOrg.vue","mtime":1608812533829},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoub3JnRGlhbG9newogIG1pbi13aWR0aDogYXV0byFpbXBvcnRhbnQ7Cn0KLm9yZ0RpYWxvZyBzcGFuewogICAgIGZvbnQtc2l6ZTogMXJlbTsKICAgZm9udC1mYW1pbHk6IFNlZ29lIFVJOwogICBsZXR0ZXItc3BhY2luZzogMC41cHg7Cn0K"},{"version":3,"sources":["NewOrg.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewOrg.vue","sourceRoot":"src/popups","sourcesContent":["<template>\r\n  <div >\r\n    <v-dialog\r\n      v-model=\"dialog\"\r\n      width=\"700\"\r\n    >\r\n      <template v-slot:activator=\"{ on }\">\r\n        \r\n          <v-btn  class=\"orgDialog\"\r\n           text @click=\"getUnitType(); editTypeAction();clicked=false; moreM()\"\r\n          v-on=\"on\">\r\n          <span v-if=\"name==='fornew'\">Əlavə et</span>\r\n          <span v-if='name===\"foredit\"'>Redaktə et</span>\r\n         </v-btn>\r\n \r\n\r\n      </template>\r\n\r\n      <v-card>\r\n        <v-card-title\r\n          class=\"modal-header\"\r\n           \r\n        >\r\n          <span v-if=\"name==='fornew'\">Yeni</span>\r\n          <span v-if='name===\"foredit\"'>Redaktə</span>\r\n         \r\n          <v-spacer></v-spacer>\r\n          \r\n           <v-btn\r\n           icon\r\n            color=\"primary\"\r\n            text\r\n            @click=\"dialog = false\"\r\n          ><v-icon>cancel</v-icon>\r\n            \r\n          </v-btn>\r\n           \r\n        </v-card-title>\r\n          <v-form @submit=\"submitOrgUnit\"  v-model=\"isFormValid\" ref=\"form\" >\r\n        <v-card-text>\r\n               <v-row>\r\n              \r\n                    <v-col cols=\"12\"  md=\"6\"   >\r\n                         <v-text-field label=\"Email\" type=\"email\" :rules=\"validationEmailRules\" placeholder=\"example@mail.ru\" v-model=\"formData.emailAddress\" required ></v-text-field>\r\n                       \r\n                         </v-col>    \r\n                 \r\n                 <v-col cols=\"12\"  md=\"6\"   >\r\n                         <v-text-field label=\"Faks nömrəsi\"  v-model=\"formData.faxNumber\" required ></v-text-field>\r\n                       \r\n                         </v-col>\r\n                <v-col cols=\"12\"  md=\"6\"   >\r\n                         <v-text-field label=\"Telefon nömrəsi\"    v-model=\"formData.phoneNumber\" required ></v-text-field>\r\n                       \r\n                         </v-col>\r\n\r\n                    <v-col cols=\"12\"  md=\"6\"   v-if=\"name=='fornew'\"> \r\n                           <v-select v-model=\"formData.typeId\"  label=\"Tipi\" :items=\"unitTypes\" item-value=\"id\" item-text=\"description\">\r\n   \r\n           </v-select>\r\n            \r\n\r\n                         </v-col>\r\n                     \r\n                         <v-col cols=\"12\"  md=\"6\"   >\r\n                         <v-text-field label=\"Veb saytı\"  v-model=\"formData.webAddress\" required ></v-text-field>\r\n                       \r\n                         </v-col>\r\n                           <v-col cols=\"12\"  md=\"6\"   >\r\n                         <v-text-field  class=\"required\" label=\"Təsviri\" v-model=\"formData.description\" required ></v-text-field>\r\n                       \r\n                         </v-col> \r\n             </v-row>\r\n        </v-card-text> \r\n        <v-divider></v-divider> \r\n        <v-card-actions class='dialog-buttons'>\r\n           <v-btn   @click=\"dialog = false; formData.formatpaymentDate=null; formData.paymentAmount=null\"  class=\"btn-cancel\" outlined>İMTİNA ET</v-btn> \r\n             <v-btn  :disabled=\"!formData.description||clicked\"  type=\"submit\" class=\"btn-add\" >TƏSDİQ ET </v-btn>  \r\n        </v-card-actions>\r\n    </v-form>\r\n      </v-card>\r\n          <ErrorDialog v-model=\"dialog_err\"  v-bind:errorMsg=\"errorMsg\"/>\r\n    </v-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n \r\nimport {  mapActions,mapGetters } from \"vuex\"; \r\n import ErrorDialog from '../popups/ErrorDialog';\r\n  export default {\r\n props:[\"name\",\"parentOrganizationUnitId\",\"organizationId\",\"editType\", \"typeId\"],\r\n components:{ErrorDialog},\r\n    data () {\r\n      return {\r\n        unitTypes:[],\r\n        obj:{},\r\n         formData:{ phoneNumber:'+994'},\r\n         isFormValid:false,\r\n         dialog: false,\r\n         menu:false,\r\n         errorMsg:'',\r\n         dialog_err:false,\r\n         clicked: false,\r\n         validationRules: [ v => !!v || 'Sahəni boş buraxmaq olmaz!'],\r\n         validationEmailRules: [\r\n         v => /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(v)   || 'Email düzgün qeyd olunmayıb!', \r\n         ],\r\n      }\r\n    },\r\n    methods:{\r\n       reset() {   this.$refs.form.reset();   },\r\n    ...mapActions([\"updateOrgs\",\"updateUnitOrgs\",\"fetchOrganizationUnitType\", \"fetchMainOrgs\",\"fetchUnitOrgs\",\"fetchSubOrgs\",\"addOrganizationUnit\"]),\r\n       getUnitType(){\r\n         this.fetchOrganizationUnitType()\r\n         .then(()=>{\r\n            this.unitTypes=this.allorgUnitType.filter(x => x.parentId == this.typeId);\r\n         })\r\n       },\r\n   addc(){\r\n       var  element = document.querySelectorAll('.tf-nc~ul li');\r\n     \r\n       for (var i = 0; i < element.length; i++) {\r\n               element[i].parentElement.parentElement.firstElementChild.classList.add(\"mystyle\");\r\n}\r\n     },\r\n        moreM(){\r\n    document.querySelector('.more-menu').style.display='none'\r\n      },\r\n    submitOrgUnit(e){    \r\n        e.preventDefault(); \r\n\r\n        if(this.name==='fornew'){\r\n\r\n        this.formData.parentOrganizationUnitId=this.parentOrganizationUnitId;\r\n         this.formData.organizationId=this.organizationId;\r\n        this.addOrganizationUnit(this.formData)\r\n        .then(()=>{  \r\n         this.clicked = true;\r\n         this.reset();\r\n         this.fetchMainOrgs()\r\n         .then(()=>{ \r\n\r\n          this.dialog=false;  \r\n          this.addc(); \r\n\r\n         }) })\r\n         .catch(error => {  \r\n                this.dialog_err=true;\r\n                this.errorMsg=error.response.data;  \r\n         }) \r\n         \r\n         }\r\n           if(this.name==='foredit'){\r\n             this.obj.address=this.formData.address;\r\n             this.obj.description=this.formData.description;\r\n             this.obj.emailAddress=this.formData.emailAddress;\r\n             this.obj.faxNumber=this.formData.faxNumber;\r\n             this.obj.phoneNumber=this.formData.phoneNumber;\r\n             this.obj.webAddress=this.formData.webAddress;\r\n             this.obj.typeId=this.formData.typeId;\r\n             if(this.editType==='edit_main_org'){\r\n             this.updateOrgs(this.obj)\r\n             .then(()=>{  \r\n               this.fetchMainOrgs();\r\n                this.dialog=false; \r\n                   this.clicked = true;\r\n              })  \r\n             .catch(error => {  \r\n                this.dialog_err=true;\r\n                this.errorMsg=error.response.data;  \r\n                 })    \r\n             }\r\n             else{\r\n               this.obj.organizationUnitId=this.formData.id;\r\n                 this.updateUnitOrgs(this.obj)\r\n                   .then(()=>{  \r\n                  this.fetchMainOrgs();\r\n                 this.dialog=false; \r\n                    this.clicked = true;\r\n              })  \r\n             .catch(error => {  \r\n                this.dialog_err=true;\r\n                this.errorMsg=error.response.data;  \r\n                 }) \r\n             }\r\n           }\r\n       },\r\n          editTypeAction(){\r\n            if(this.editType===\"edit_main_org\"){\r\n              this.fetchMainOrgs()\r\n              .then(()=>{\r\n                this.formData=this.allmainOrgs.find(x => x.id == this.organizationId); \r\n              })\r\n            }\r\n\r\n            else if(this.editType===\"edit_org_unit\"){\r\n                 this.fetchUnitOrgs()\r\n                   .then(()=>{\r\n                     this.formData=this.allOrgs.find(x => x.id == this.parentOrganizationUnitId);\r\n                    \r\n              })\r\n            }\r\n          }\r\n\r\n     \r\n\r\n        \r\n     \r\n},\r\n     computed: { \r\n       ...mapGetters([\"allorgUnitType\",\"allmainOrgs\",\"allOrgs\",\"allsuborgs\"]), \r\n\r\n     },\r\n  \r\n   created(){\r\n            console.log(this.unitTypes);\r\n   }\r\n  }\r\n</script>\r\n\r\n <style  >\r\n .orgDialog{\r\n   min-width: auto!important;\r\n }\r\n .orgDialog span{\r\n      font-size: 1rem;\r\n    font-family: Segoe UI;\r\n    letter-spacing: 0.5px;\r\n }\r\n </style>"]}]}