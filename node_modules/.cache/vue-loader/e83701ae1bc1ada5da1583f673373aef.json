{"remainingRequest":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\q.samaya\\Desktop\\MIS\\src\\components\\ContractsTable.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\src\\components\\ContractsTable.vue","mtime":1592565712759},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQogDQouY3VzdG9tLWhpZ2hsaWdodC1yb3d7DQogIGJhY2tncm91bmQ6ICNmY2YzYjYhaW1wb3J0YW50O30NCiAgLmNvbnRyYWN0X3BhZ2V7DQogICAgaGVpZ2h0OiAxMDAlOw0KICANCn0NCiAudGFibGUtY29tcG9uZW5ldCAudi1kYXRhLXRhYmxlew0KICAgIGhlaWdodDogMTAwJTsNCiAgfQ0KIC50YWJsZS1jb21wb25lbmV0IC52LWRhdGEtdGFibGVfX3dyYXBwZXJ7DQogICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gNTRweCk7DQogIH0NCg0KLmNvbnRyYWN0LXRhYmxlLWRlc2lnbi50YWJsZS1jb21wb25lbmV0ew0KICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDkzcHgpOw0KfQ0KIA0KICAuaHItdGFibGUtZGVzaWduLnRhYmxlLWNvbXBvbmVuZXR7DQogICAgIGhlaWdodDogY2FsYygxMDAlIC0gNzVweCk7DQp9DQoNCg0KICAuc2VhcmNoLXRhYmxlLWRlc2lnbi50YWJsZS1jb21wb25lbmV0ew0KICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDE0NXB4KTsNCn0NCiAgLnVzZXJzLXRhYmxlLWRlc2lnbi50YWJsZS1jb21wb25lbmV0ew0KICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDMwcHgpOw0KfQ0KICANCg=="},{"version":3,"sources":["ContractsTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwPA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA","file":"ContractsTable.vue","sourceRoot":"src/components","sourcesContent":[" <template>\r\n  <div class=\"table-componenet contract-table-design\" v-if='allnewagreement'>\r\n    \r\n    <v-data-table \r\n      :custom-sort=\"customSort\"\r\n      :headers=\"headers\"\r\n      :items=\"filteredagreements\"   \r\n       item-key=\"contractNumber\" \r\n      :footer-props=\"{\r\n      itemsPerPageText:'Məlumat sayı:',\r\n      itemsPerPageOptions: [10,50,100, 1000], // -> Add this example\r\n          \r\n      }\"\r\n        \r\n    >\r\n           <template v-slot:body=\"{ items }\">\r\n           <tbody>\r\n          <tr :class=\"key === selectedRow ? 'custom-highlight-row' : ''\" @click=\"rowSelect(key)\" v-for=\"(item, key) in items\" :key=\"item.name\">\r\n          <td>{{key+1}}</td> \r\n          <td style=\"width:23%\">{{ item.contractTypeDescription }}</td>\r\n          <td>{{ item.contractNumber }}</td> \r\n          <td>{{ item.sellerPersonnelName+' '+item.sellerPersonnelSurname +' '+item.sellerPersonnelPatronymic }}</td>\r\n          <td>{{  item.currentProcessorPersonnelName+' '+item.currentProcessorPersonnelSurname+' '+item.currentProcessorPersonnelPatronymic }}</td>\r\n           <td>{{ item.contractDate }}</td> \r\n               <td style=\"color:#ca892f;\" v-if='Array.isArray(proccess)'>{{ $t(item.processStatus) }}</td>\r\n           <td><v-menu offset-y :close-on-content-click='closeOnContentClick' content-class=\"more-menu\">\r\n      <template v-slot:activator=\"{ on }\">\r\n       <v-btn  @click=\"getContract(item.id)\" v-on=\"on\" icon>\r\n        <v-icon>more_vert</v-icon>  \r\n      </v-btn>\r\n      </template>\r\n      <v-list class='button_list'>\r\n          <v-list-item  v-if='item.subMenuItemList.find(x => x.code === \"CONTRACT_CANCEL\")'>\r\n           <v-list-item-content>\r\n             <v-list-item-title><CancelContract v-bind:closeOnContentClick=\"closeOnContentClick\" v-bind:contractId=\"item.id\" v-bind:viewComponentId=\"item.subMenuItemList.find(x => x.code === 'CONTRACT_CANCEL').viewComponentId\"/></v-list-item-title>\r\n          </v-list-item-content>\r\n         </v-list-item>\r\n\r\n           <v-list-item  v-if='item.subMenuItemList.find(x => x.code === \"CONTRACT_COMPLETE\")'>\r\n           <v-list-item-content>\r\n             <v-list-item-title><CompleteContract v-bind:contractId=\"item.id\"  v-bind:viewComponentId=\"item.subMenuItemList.find(x => x.code === 'CONTRACT_COMPLETE').viewComponentId\"/></v-list-item-title>\r\n          </v-list-item-content>\r\n         </v-list-item>\r\n\r\n         <v-list-item  v-if='item.subMenuItemList.find(x => x.code === \"CONTRACT_PAYMENTS\")'>\r\n           <v-list-item-content>\r\n             <v-list-item-title><Payment v-bind:contractId=\"item.id\"  v-bind:viewComponentId=\"item.subMenuItemList.find(x => x.code === 'CONTRACT_PAYMENTS').viewComponentId\"/></v-list-item-title>\r\n          </v-list-item-content>\r\n         </v-list-item>\r\n\r\n          <v-list-item v-if='item.subMenuItemList.find(x => x.code === \"CONTRACT_HISTORY\")'>\r\n           <v-list-item-content>\r\n             <v-list-item-title><HistoryContract v-bind:contractId=\"item.id\" v-bind:viewComponentId=\"item.subMenuItemList.find(x => x.code === 'CONTRACT_HISTORY').viewComponentId\"/></v-list-item-title>\r\n          </v-list-item-content>\r\n         </v-list-item>\r\n\r\n         <v-list-item v-if='item.subMenuItemList.find(x => x.code === \"CONTRACT_VIEW\")'>\r\n          \r\n            <router-link :to=\"{ path: '/update/'+ item.id  , query: { status: 'view' } }\">\r\n  \r\n           <v-list-item-content>\r\n             <v-list-item-title><v-icon>folder_special</v-icon>Baxış</v-list-item-title>\r\n          </v-list-item-content>\r\n            </router-link>\r\n         </v-list-item>\r\n\r\n           <v-list-item v-if='item.subMenuItemList.find(x => x.code === \"CONTRACT_EDIT\")'>\r\n               \r\n          \r\n          <router-link :to=\"{ path: '/update/'+ item.id  , query: { status: 'update', prSt: item.processStatus, contType: item.contractTypeDescription } }\">\r\n           <v-list-item-content>\r\n             <v-list-item-title><v-icon>edit</v-icon><span>Redaktə</span></v-list-item-title>\r\n          </v-list-item-content>\r\n          </router-link>\r\n         </v-list-item>\r\n\r\n           <v-list-item v-if='item.subMenuItemList.find(x => x.code === \"CONTRACT_SEND\")'>\r\n           <v-list-item-content>\r\n             <v-list-item-title><Send v-bind:contractId=\"item.id\"  v-bind:viewComponentId=\"item.subMenuItemList.find(x => x.code === 'CONTRACT_SEND').viewComponentId\"/></v-list-item-title>\r\n          </v-list-item-content>\r\n         </v-list-item>\r\n\r\n          <v-list-item v-if='item.subMenuItemList.find(x => x.code === \"CONTRACT_RECOVER\")'>\r\n           <v-list-item-content>\r\n             <v-list-item-title><RecoverContract v-bind:contractId=\"item.id\"  v-bind:viewComponentId=\"item.subMenuItemList.find(x => x.code === 'CONTRACT_RECOVER').viewComponentId\"/></v-list-item-title>\r\n          </v-list-item-content>\r\n         </v-list-item>\r\n\r\n\r\n           <v-list-item v-if='item.subMenuItemList.find(x => x.code === \"CONTRACT_DELETE\")'>\r\n           <v-list-item-content>\r\n             <v-list-item-title><Delete v-bind:contractId=\"item.id\"  v-bind:viewName=\"name\"/></v-list-item-title>\r\n          </v-list-item-content>\r\n         </v-list-item>\r\n\r\n        <v-list-item v-if='item.subMenuItemList.find(x => x.code === \"CONTRACT_DOCUMENTS\")'>\r\n           <v-list-item-content>\r\n             <v-list-item-title><ContractDocument v-bind:contractId=\"item.id\"  v-bind:router=\"router\"  v-bind:viewComponentId=\"item.subMenuItemList.find(x => x.code === 'CONTRACT_DOCUMENTS').viewComponentId\"/></v-list-item-title>\r\n          </v-list-item-content>\r\n         </v-list-item>\r\n\r\n        <v-list-item v-if='item.subMenuItemList.find(x => x.code === \"CONTRACT_PAYMENT_PLAN\")'>\r\n           <v-list-item-content>\r\n             <v-list-item-title><ContractPaymentPlans v-bind:contractId=\"item.id\"  v-bind:router=\"router\"  v-bind:viewComponentId=\"item.subMenuItemList.find(x => x.code === 'CONTRACT_PAYMENT_PLAN').viewComponentId\"/></v-list-item-title>\r\n          </v-list-item-content>\r\n         </v-list-item>\r\n      </v-list>\r\n    </v-menu>\r\n    </td>\r\n     \r\n   </tr>\r\n      <tr v-if=\"filteredagreements.length==0\" class=\"norecord\">\r\n          <td colspan=\"7\"><div class=\"norecord-c\">Məlumat yoxdur...</div></td>\r\n        </tr>\r\n   </tbody>\r\n    </template>\r\n     </v-data-table> \r\n      <ErrorDialog v-model=\"dialog_err\"  v-bind:errorMsg=\"errorMsg\"/>\r\n  </div>\r\n\r\n</template>\r\n \r\n<script > \r\nimport ErrorDialog from '../popups/ErrorDialog';\r\nimport ContractDocument from '../popups/ContractDocument';\r\nimport ContractPaymentPlans from '../popups/ContractPaymentPlans';\r\nimport Payment from '../popups/Payment';\r\nimport CancelContract from '../popups/CancelContract';\r\nimport CompleteContract from '../popups/CompleteContract';\r\n import HistoryContract from '../popups/HistoryContract';\r\nimport Send from '../popups/Send';\r\nimport RecoverContract from '../popups/RecoverContract';\r\nimport Delete from '../popups/Delete';\r\nimport { mapGetters, mapActions } from \"vuex\";\r\n \r\n  export default {\r\n     props:[\"proccess\"], \r\n      components:{ErrorDialog,ContractDocument,ContractPaymentPlans,Payment, CancelContract,CompleteContract, Send , HistoryContract,RecoverContract, Delete },\r\n \r\n    data () {\r\n      return {   \r\n      selectedRow: null,\r\n        name:\"contracts\",\r\n        router: this.$router.currentRoute.path,\r\n        errorMsg:'', \r\n        dialog_err:false,\r\n         itemType: null \r\n      }\r\n    },\r\n     methods: {\r\n    ...mapActions([\"fetchContracts\", \"getContract\" ]),\r\n        rowSelect(idx) { this.selectedRow = idx; },\r\n\r\n            customSort: function(items, index, isDesc) {\r\n             items.sort((a, b) => {\r\n           if (index[0]=='contractDate') {\r\n            var  dda= a[index].slice(0,2);\r\n              var mma= a[index].slice(3,5);\r\n              var yya= a[index].slice(6,10);\r\n              var adate=mma+'.'+dda+'.'+yya;\r\n\r\n              var  ddb= b[index].slice(0,2);\r\n              var mmb= b[index].slice(3,5);\r\n              var yyb= b[index].slice(6,10);\r\n              var bdate=mmb+'.'+ddb+'.'+yyb;\r\n\r\n              if (!isDesc[0]) { \r\n                 return new Date(bdate).getTime() - new Date(adate).getTime();\r\n               } else { \r\n                return new Date(adate).getTime() - new Date(bdate).getTime();\r\n            }\r\n            \r\n          }\r\n           else {\r\n          if (!isDesc[0]) {\r\n            return a[index] < b[index] ? -1 : 1;\r\n          } else {\r\n            return b[index] < a[index] ? -1 : 1;\r\n          }\r\n        }\r\n          \r\n      });\r\n      return items;\r\n    }\r\n         \r\n        },\r\n\r\n        \r\n  computed: {...mapGetters([\"allnewagreement\",\"filteredagreements\",\"formData\",\"loginuser\",\"closeOnContentClick\"]),\r\n        actionQueryString:function(){\r\n           \r\n          return this.loginuser.user.menuList.find(x => x.code ==\"TOP_MENU\").menuItemList.find(x => x.routePath ==this.router).actionQueryString;\r\n \r\n         \r\n          },\r\n\r\n     \r\n\r\n    headers(){\r\n      if(this.router==='/archive'){\r\n        return [\r\n        { text: '№',   value: 'index',sortable:false },\r\n        { text: 'Müqavilənin tipi',   value: 'contractTypeDescription'  },\r\n        { text: 'Müqavilənin nömrəsi', value: 'contractNumber'   }, \r\n        { text: 'Satıcının A.S.A',   value: 'sellerPersonnelName'   },\r\n        { text: 'Məsul şəxsin A.S.A',  value: 'currentProcessorPersonnelName'  },\r\n        { text: 'Müqavilə tarixi',  value: 'contractDate'   },\r\n        { text: 'Statusu',   value: 'processStatus',sortable:false  },\r\n         { text: '',   value: 'more_vert',sortable:false },\r\n      ] \r\n      }\r\n      else{\r\n         return [\r\n        { text: '№',   value: 'index',sortable:false },\r\n        { text: 'Müqavilənin tipi',   value: 'contractTypeDescription'  },\r\n        { text: 'Müqavilənin nömrəsi', value: 'contractNumber'  }, \r\n        { text: 'Satıcının A.S.A',   value: 'sellerPersonnelName'  },\r\n        { text: 'Məsul şəxsin A.S.A',  value: 'currentProcessorPersonnelName'  },\r\n        { text: 'Müqavilə tarixi',  value: 'contractDate'   },\r\n         { text: '',   value: 'more_vert',sortable:false },\r\n      ];\r\n    \r\n      }\r\n    }\r\n     \r\n  },\r\n \r\n    created() {\r\n      console.log(this.loginuser);\r\n        this.fetchContracts(this.actionQueryString)\r\n        \r\n          .catch(error => {  \r\n             if(error.response.data.errorCode=='Session.NotFound'|| error.response.data.errorCode=='Session.IsExpired'){\r\n                   this.$router.push({ path: '/' });   }  \r\n     \r\n                this.dialog_err=true;\r\n                this.errorMsg=error.response.data;  \r\n               \r\n         })\r\n         \r\n       \r\n       }\r\n\r\n  \r\n}\r\n</script>\r\n<style  >\r\n \r\n.custom-highlight-row{\r\n  background: #fcf3b6!important;}\r\n  .contract_page{\r\n    height: 100%;\r\n  \r\n}\r\n .table-componenet .v-data-table{\r\n    height: 100%;\r\n  }\r\n .table-componenet .v-data-table__wrapper{\r\n        height: calc(100% - 54px);\r\n  }\r\n\r\n.contract-table-design.table-componenet{\r\n     height: calc(100% - 93px);\r\n}\r\n \r\n  .hr-table-design.table-componenet{\r\n     height: calc(100% - 75px);\r\n}\r\n\r\n\r\n  .search-table-design.table-componenet{\r\n     height: calc(100% - 145px);\r\n}\r\n  .users-table-design.table-componenet{\r\n     height: calc(100% - 30px);\r\n}\r\n  \r\n</style>\r\n "]}]}