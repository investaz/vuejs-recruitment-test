{"remainingRequest":"C:\\Users\\q.samaya\\Desktop\\vuetifytest\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\q.samaya\\Desktop\\vuetifytest\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\q.samaya\\Desktop\\vuetifytest\\src\\store\\modules\\auth.js","dependencies":[{"path":"C:\\Users\\q.samaya\\Desktop\\vuetifytest\\src\\store\\modules\\auth.js","mtime":1582613945972},{"path":"C:\\Users\\q.samaya\\Desktop\\vuetifytest\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\vuetifytest\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\vuetifytest\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IGdldEZpZWxkLCB1cGRhdGVGaWVsZCB9IGZyb20gJ3Z1ZXgtbWFwLWZpZWxkcyc7CnZhciBzdGF0ZSA9IHsKICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpIHx8IG51bGwKfTsKdmFyIGdldHRlcnMgPSB7CiAgZ2V0RmllbGQ6IGdldEZpZWxkLAogIGxvZ2dlZEluOiBmdW5jdGlvbiBsb2dnZWRJbihzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnRva2VuICE9PSBudWxsOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgZGVzdHJveVRva2VuOiBmdW5jdGlvbiBkZXN0cm95VG9rZW4oY29udGV4dCkgewogICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJyArIGNvbnRleHQuc3RhdGUudG9rZW47CgogICAgaWYgKGNvbnRleHQuZ2V0dGVycy5sb2dnZWRJbikgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGF4aW9zLnBvc3QoJy9sb2dvdXQnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FjY2Vzc190b2tlbicpOwogICAgICAgICAgY29udGV4dC5jb21taXQoJ2Rlc3Ryb3lUb2tlbicpOwogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7IC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgIC8vIGNvbnRleHQuY29tbWl0KCdhZGRUb2RvJywgcmVzcG9uc2UuZGF0YSkKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhY2Nlc3NfdG9rZW4nKTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdkZXN0cm95VG9rZW4nKTsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgcmV0cmlldmVUb2tlbjogZnVuY3Rpb24gcmV0cmlldmVUb2tlbihjb250ZXh0LCBjcmVkZW50aWFscykgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgYXhpb3MucG9zdCgnL2xvZ2luJywgewogICAgICAgIHVzZXJuYW1lOiBjcmVkZW50aWFscy51c2VybmFtZSwKICAgICAgICBwYXNzd29yZDogY3JlZGVudGlhbHMucGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgdG9rZW4gPSByZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbjsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzX3Rva2VuJywgdG9rZW4pOwogICAgICAgIGNvbnRleHQuY29tbWl0KCdyZXRyaWV2ZVRva2VuJywgdG9rZW4pOwogICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgdXBkYXRlRmllbGQ6IHVwZGF0ZUZpZWxkLAogIHJldHJpZXZlVG9rZW46IGZ1bmN0aW9uIHJldHJpZXZlVG9rZW4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["C:/Users/q.samaya/Desktop/vuetifytest/src/store/modules/auth.js"],"names":["axios","getField","updateField","state","token","localStorage","getItem","getters","loggedIn","actions","destroyToken","context","defaults","headers","common","Promise","resolve","reject","post","then","response","removeItem","commit","catch","error","retrieveToken","credentials","username","password","data","access_token","setItem","console","log","mutations"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,iBAAtC;AACA,IAAMC,KAAK,GAAG;AAEZC,EAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,cAArB,KAAwC;AAFnC,CAAd;AAKA,IAAMC,OAAO,GAAG;AACdN,EAAAA,QAAQ,EAARA,QADc;AAEdO,EAAAA,QAFc,oBAELL,KAFK,EAEE;AACd,WAAOA,KAAK,CAACC,KAAN,KAAgB,IAAvB;AACD;AAJa,CAAhB;AAOA,IAAMK,OAAO,GAAG;AACdC,EAAAA,YADc,wBACDC,OADC,EACQ;AACpBX,IAAAA,KAAK,CAACY,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,YAAYH,OAAO,CAACR,KAAR,CAAcC,KAA3E;;AACA,QAAIO,OAAO,CAACJ,OAAR,CAAgBC,QAApB,EAA8B;AAC5B,aAAO,IAAIO,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCjB,QAAAA,KAAK,CAACkB,IAAN,CAAW,SAAX,EACGC,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChBf,UAAAA,YAAY,CAACgB,UAAb,CAAwB,cAAxB;AACAV,UAAAA,OAAO,CAACW,MAAR,CAAe,cAAf;AACAN,UAAAA,OAAO,CAACI,QAAD,CAAP,CAHgB,CAIhB;AACA;AACD,SAPH,EAQGG,KARH,CAQS,UAAAC,KAAK,EAAI;AACdnB,UAAAA,YAAY,CAACgB,UAAb,CAAwB,cAAxB;AACAV,UAAAA,OAAO,CAACW,MAAR,CAAe,cAAf;AACAL,UAAAA,MAAM,CAACO,KAAD,CAAN;AACD,SAZH;AAaD,OAdM,CAAP;AAeD;AACF,GApBa;AAsBdC,EAAAA,aAtBc,yBAsBAd,OAtBA,EAsBSe,WAtBT,EAsBsB;AAClC,WAAO,IAAIX,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCjB,MAAAA,KAAK,CAACkB,IAAN,CAAW,QAAX,EAAqB;AACnBS,QAAAA,QAAQ,EAAED,WAAW,CAACC,QADH;AAEnBC,QAAAA,QAAQ,EAAEF,WAAW,CAACE;AAFH,OAArB,EAIGT,IAJH,CAIQ,UAAAC,QAAQ,EAAI;AAChB,YAAMhB,KAAK,GAAGgB,QAAQ,CAACS,IAAT,CAAcC,YAA5B;AAEAzB,QAAAA,YAAY,CAAC0B,OAAb,CAAqB,cAArB,EAAqC3B,KAArC;AACAO,QAAAA,OAAO,CAACW,MAAR,CAAe,eAAf,EAAgClB,KAAhC;AACAY,QAAAA,OAAO,CAACI,QAAD,CAAP;AACD,OAVH,EAWGG,KAXH,CAWS,UAAAC,KAAK,EAAI;AACdQ,QAAAA,OAAO,CAACC,GAAR,CAAYT,KAAZ;AACAP,QAAAA,MAAM,CAACO,KAAD,CAAN;AACD,OAdH;AAeC,KAhBI,CAAP;AAiBD;AAxCa,CAAhB;AA2CA,IAAMU,SAAS,GACf;AACEhC,EAAAA,WAAW,EAAXA,WADF;AAEEuB,EAAAA,aAFF,yBAEgBtB,KAFhB,EAEuBC,KAFvB,EAE8B;AAC1BD,IAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACA;AAJJ,CADA;AAQA,eAAe;AACbD,EAAAA,KAAK,EAALA,KADa;AAEbI,EAAAA,OAAO,EAAPA,OAFa;AAGbE,EAAAA,OAAO,EAAPA,OAHa;AAIbyB,EAAAA,SAAS,EAATA;AAJa,CAAf","sourcesContent":["import axios from 'axios';\r\nimport { getField, updateField } from 'vuex-map-fields';\r\nconst state = {\r\n \r\n  token: localStorage.getItem('access_token') || null\r\n};\r\n\r\nconst getters = {\r\n  getField,\r\n  loggedIn(state) {\r\n    return state.token !== null\r\n  } \r\n};\r\n\r\nconst actions = {\r\n  destroyToken(context) {\r\n    axios.defaults.headers.common['Authorization'] = 'Bearer ' + context.state.token\r\n    if (context.getters.loggedIn) {\r\n      return new Promise((resolve, reject) => {\r\n        axios.post('/logout')\r\n          .then(response => {\r\n            localStorage.removeItem('access_token')\r\n            context.commit('destroyToken')\r\n            resolve(response)\r\n            // console.log(response);\r\n            // context.commit('addTodo', response.data)\r\n          })\r\n          .catch(error => {\r\n            localStorage.removeItem('access_token')\r\n            context.commit('destroyToken')\r\n            reject(error)\r\n          })\r\n      })\r\n    }\r\n  },\r\n\r\n  retrieveToken(context, credentials) {\r\n    return new Promise((resolve, reject) => {\r\n      axios.post('/login', {\r\n        username: credentials.username,\r\n        password: credentials.password,\r\n      })\r\n        .then(response => {\r\n          const token = response.data.access_token\r\n\r\n          localStorage.setItem('access_token', token)\r\n          context.commit('retrieveToken', token)\r\n          resolve(response) \r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n          reject(error)\r\n        })\r\n      })    \r\n  } \r\n};\r\n\r\nconst mutations = \r\n{ \r\n  updateField,\r\n  retrieveToken(state, token) {\r\n    state.token = token\r\n   }\r\n};\r\n\r\nexport default {\r\n  state,\r\n  getters,\r\n  actions,\r\n  mutations\r\n};\r\n\r\n\r\n \r\n  "]}]}