{"remainingRequest":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\q.samaya\\Desktop\\MIS\\src\\components\\WorkersTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\src\\components\\WorkersTable.vue","mtime":1592566002202},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\q.samaya\\Desktop\\MIS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVXBkYXRlV29ya2VyIGZyb20gJy4uL3BvcHVwcy9VcGRhdGVXb3JrZXInOw0KaW1wb3J0IE5ld1VzZXIgZnJvbSAnLi4vcG9wdXBzL05ld1VzZXInOw0KaW1wb3J0IExlYXZlV29ya2VyIGZyb20gJy4uL3BvcHVwcy9MZWF2ZVdvcmtlcic7DQppbXBvcnQgRXJyb3JEaWFsb2cgZnJvbSAnLi4vcG9wdXBzL0Vycm9yRGlhbG9nJzsNCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsgIA0KICBleHBvcnQgZGVmYXVsdCB7DQogICAgIA0KICAgIGNvbXBvbmVudHM6e05ld1VzZXIsTGVhdmVXb3JrZXIsVXBkYXRlV29ya2VyLEVycm9yRGlhbG9nfSwNCiAgICBkYXRhICgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgICAgZXJyb3JNc2c6JycsDQogICAgICAgICBkaWFsb2dfZXJyOmZhbHNlLA0KICAgICAgICBkaWFsb2c6IGZhbHNlLA0KICAgICAgICBzZWxlY3RlZFJvdzogbnVsbCwNCiAgICAgICAgICAgICAgaGVhZGVyczpbDQogICAgICAgIHsgdGV4dDogJ+KElicsICAgdmFsdWU6ICdpbmRleCcsc29ydGFibGU6ZmFsc2UgfSwNCiAgICAgICAgeyB0ZXh0OiAnQWTEsScsICAgdmFsdWU6ICduYW1lJyAgfSwNCiAgICAgICAgeyB0ZXh0OiAnU295YWTEsScsIHZhbHVlOiAnc3VybmFtZScgICB9LCANCiAgICAgICAgeyB0ZXh0OiAnRG/En3VtIHRhcml4aScsICAgdmFsdWU6ICdiaXJ0aERhdGUnICAgfSwNCiAgICAgICAgeyB0ZXh0OiAnVsmZemlmyZlzaScsICAgdmFsdWU6ICdwb3NpdGlvbkRlc2NyaXB0aW9uJyAgIH0sDQogICAgICAgIHsgdGV4dDogJ8SwxZ/JmSBxyZlidWwgdGFyaXhpJywgIHZhbHVlOiAnZW50cmFuY2VEYXRlJyAgIH0sDQogICAgICAgeyB0ZXh0OiAnxLDFn2TJmW4gw6fEsXhtYSB0YXJpeGknLCAgdmFsdWU6ICdsZWF2ZURhdGUnLHNvcnRhYmxlOmZhbHNlICB9LCANCiAgICAgICAgICB7IHRleHQ6ICcnLCAgdmFsdWU6ICdtb3JlJyAsc29ydGFibGU6ZmFsc2UgIH0sIA0KICAgICAgXQ0KICAgICAgICAgIA0KICAgICAgfQ0KICAgIH0sDQogICAgICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucyhbImZldGNoV29ya2VycyIsICJkZWxldGVXb3JrZXIiXSksDQogIHJvd1NlbGVjdChpZHgpIHsgdGhpcy5zZWxlY3RlZFJvdyA9IGlkeDsgfSwNCiAgICAgICAgICAgICAgIGN1c3RvbVNvcnQ6IGZ1bmN0aW9uKGl0ZW1zLCBpbmRleCwgaXNEZXNjKSB7DQogICAgICAgICAgICAgaXRlbXMuc29ydCgoYSwgYikgPT4gew0KICAgICAgICAgICBpZiAoaW5kZXhbMF09PSdlbnRyYW5jZURhdGUnKSB7DQogICAgICAgICAgICB2YXIgIGRkYT0gYVtpbmRleF0uc2xpY2UoMCwyKTsNCiAgICAgICAgICAgICAgdmFyIG1tYT0gYVtpbmRleF0uc2xpY2UoMyw1KTsNCiAgICAgICAgICAgICAgdmFyIHl5YT0gYVtpbmRleF0uc2xpY2UoNiwxMCk7DQogICAgICAgICAgICAgIHZhciBhZGF0ZT1tbWErJy4nK2RkYSsnLicreXlhOw0KDQogICAgICAgICAgICAgIHZhciAgZGRiPSBiW2luZGV4XS5zbGljZSgwLDIpOw0KICAgICAgICAgICAgICB2YXIgbW1iPSBiW2luZGV4XS5zbGljZSgzLDUpOw0KICAgICAgICAgICAgICB2YXIgeXliPSBiW2luZGV4XS5zbGljZSg2LDEwKTsNCiAgICAgICAgICAgICAgdmFyIGJkYXRlPW1tYisnLicrZGRiKycuJyt5eWI7DQoNCiAgICAgICAgICAgICAgaWYgKCFpc0Rlc2NbMF0pIHsgDQogICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShiZGF0ZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYWRhdGUpLmdldFRpbWUoKTsNCiAgICAgICAgICAgICAgIH0gZWxzZSB7IA0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShhZGF0ZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYmRhdGUpLmdldFRpbWUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgaWYgKCFpc0Rlc2NbMF0pIHsNCiAgICAgICAgICAgIHJldHVybiBhW2luZGV4XSA8IGJbaW5kZXhdID8gLTEgOiAxOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gYltpbmRleF0gPCBhW2luZGV4XSA/IC0xIDogMTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgcmV0dXJuIGl0ZW1zOw0KICAgIH0NCiAgICAgICAgfSwNCiAgY29tcHV0ZWQ6IG1hcEdldHRlcnMoWyJhbGx3b3JrZXJzIiwiZmlsdGVyZWR3b3JrZXJzIl0pLA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZmV0Y2hXb3JrZXJzKCkgDQogICAgIC5jYXRjaChlcnJvciA9PiB7ICANCiAgICAgICAgaWYoZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvckNvZGU9PSdTZXNzaW9uLk5vdEZvdW5kJ3x8IGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3JDb2RlPT0nU2Vzc2lvbi5Jc0V4cGlyZWQnKXsgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnLycgfSk7ICAgfQ0KICAgICAgICAgDQogICAgICAgICAgICAgIHRoaXMuZGlhbG9nX2Vycj10cnVlOw0KICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNc2c9ZXJyb3IucmVzcG9uc2UuZGF0YTsgDQogICAgICAgIA0KICAgICAgICAgfSkNCiAgfQ0KICANCn0NCg=="},{"version":3,"sources":["WorkersTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA","file":"WorkersTable.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n<div class=\"table-componenet hr-table-design\">\r\n    <v-data-table \r\n     :custom-sort=\"customSort\"\r\n      :headers=\"headers\"\r\n      :items=\"allworkers\"   \r\n       item-key=\"name\" \r\n         :footer-props=\"{\r\n        itemsPerPageText:'Məlumat sayı:',\r\n           itemsPerPageOptions: [10,50,100, 1000], // -> Add this example\r\n          \r\n      }\">\r\n     \r\n        <template v-slot:body=\"{ items }\">\r\n           <tbody>\r\n          <tr :class=\"key === selectedRow ? 'custom-highlight-row' : ''\" @click=\"rowSelect(key)\" v-for=\"(item, key) in items\" :key=\"key\">\r\n          <td >{{key+1}}</td>\r\n          <td>{{ item.name }}</td> \r\n          <td>{{ item.surname }}</td>\r\n          <td>{{ item.birthDate }}</td>\r\n          <td>{{ item.positionDescription }}</td>\r\n          <td>{{ item.entranceDate }}</td>\r\n          <td>{{ item.leaveDate }}</td>\r\n           <td>\r\n             <v-menu v-if='item.leaveDate==null' offset-y :close-on-content-click='false' >\r\n      <template v-slot:activator=\"{ on }\">\r\n       <v-btn v-on=\"on\" icon>\r\n        <v-icon>more_vert</v-icon>  \r\n      </v-btn>\r\n      </template>\r\n      \r\n      <v-list class='button_list'>\r\n         <v-list-item>\r\n          <NewUser v-bind:nameWorker = 'item.name'  v-bind:surnameWorker = 'item.surname' v-bind:personelId = 'item.id'  />\r\n         </v-list-item>\r\n          <v-list-item>\r\n          <LeaveWorker v-bind:personelId = 'item.id'  />\r\n         </v-list-item>\r\n          <v-list-item>\r\n          <UpdateWorker v-bind:personelId = 'item.id'  />\r\n         </v-list-item>\r\n      </v-list>\r\n    </v-menu></td>\r\n        </tr>\r\n        <tr v-if=\"allworkers.length==0\" class=\"norecord\">\r\n          <td colspan=\"8\"><div class=\"norecord-c\">Məlumat yoxdur...</div></td>\r\n        </tr>\r\n      </tbody>\r\n    </template>\r\n  </v-data-table> \r\n    <ErrorDialog v-model=\"dialog_err\"  v-bind:errorMsg=\"errorMsg\"/>\r\n  </div>\r\n\r\n</template>\r\n \r\n<script >\r\nimport UpdateWorker from '../popups/UpdateWorker';\r\nimport NewUser from '../popups/NewUser';\r\nimport LeaveWorker from '../popups/LeaveWorker';\r\nimport ErrorDialog from '../popups/ErrorDialog';\r\nimport { mapGetters, mapActions } from \"vuex\";  \r\n  export default {\r\n     \r\n    components:{NewUser,LeaveWorker,UpdateWorker,ErrorDialog},\r\n    data () {\r\n      return {\r\n          errorMsg:'',\r\n         dialog_err:false,\r\n        dialog: false,\r\n        selectedRow: null,\r\n              headers:[\r\n        { text: '№',   value: 'index',sortable:false },\r\n        { text: 'Adı',   value: 'name'  },\r\n        { text: 'Soyadı', value: 'surname'   }, \r\n        { text: 'Doğum tarixi',   value: 'birthDate'   },\r\n        { text: 'Vəzifəsi',   value: 'positionDescription'   },\r\n        { text: 'İşə qəbul tarixi',  value: 'entranceDate'   },\r\n       { text: 'İşdən çıxma tarixi',  value: 'leaveDate',sortable:false  }, \r\n          { text: '',  value: 'more' ,sortable:false  }, \r\n      ]\r\n          \r\n      }\r\n    },\r\n      methods: {\r\n    ...mapActions([\"fetchWorkers\", \"deleteWorker\"]),\r\n  rowSelect(idx) { this.selectedRow = idx; },\r\n               customSort: function(items, index, isDesc) {\r\n             items.sort((a, b) => {\r\n           if (index[0]=='entranceDate') {\r\n            var  dda= a[index].slice(0,2);\r\n              var mma= a[index].slice(3,5);\r\n              var yya= a[index].slice(6,10);\r\n              var adate=mma+'.'+dda+'.'+yya;\r\n\r\n              var  ddb= b[index].slice(0,2);\r\n              var mmb= b[index].slice(3,5);\r\n              var yyb= b[index].slice(6,10);\r\n              var bdate=mmb+'.'+ddb+'.'+yyb;\r\n\r\n              if (!isDesc[0]) { \r\n                 return new Date(bdate).getTime() - new Date(adate).getTime();\r\n               } else { \r\n                return new Date(adate).getTime() - new Date(bdate).getTime();\r\n            }\r\n          }\r\n             else {\r\n          if (!isDesc[0]) {\r\n            return a[index] < b[index] ? -1 : 1;\r\n          } else {\r\n            return b[index] < a[index] ? -1 : 1;\r\n          }\r\n        }\r\n      });\r\n      return items;\r\n    }\r\n        },\r\n  computed: mapGetters([\"allworkers\",\"filteredworkers\"]),\r\n  created() {\r\n    this.fetchWorkers() \r\n     .catch(error => {  \r\n        if(error.response.data.errorCode=='Session.NotFound'|| error.response.data.errorCode=='Session.IsExpired'){ this.$router.push({ path: '/' });   }\r\n         \r\n              this.dialog_err=true;\r\n                this.errorMsg=error.response.data; \r\n        \r\n         })\r\n  }\r\n  \r\n}\r\n</script>"]}]}